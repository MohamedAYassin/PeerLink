# PeerLink Backend Configuration

# ==================== Database Configuration ====================
# PostgreSQL connection string for Prisma
# Format: postgresql://USER:PASSWORD@HOST:PORT/DATABASE?schema=SCHEMA
DATABASE_URL=postgresql://postgres:password@localhost:5432/peerlink?schema=public

# ==================== Server Configuration ====================
PORT=5000
NODE_ENV=development

# Node identification in cluster
# For Docker, set this to the container name or IP address reachable by other nodes
NODE_HOSTNAME=localhost
NODE_PORT=5000
# NODE_ID will be auto-generated if not provided

# ==================== Redis Configuration ====================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# Redis Connection Pool Settings
REDIS_MAX_RETRIES=3
REDIS_RETRY_DELAY=100
REDIS_CONNECT_TIMEOUT=10000
REDIS_COMMAND_TIMEOUT=5000

# Redis TTL Configuration (seconds)
TTL_CLIENT_SESSION=3600
TTL_SHARE_SESSION=86400
TTL_UPLOAD_STATE=7200
TTL_RATE_LIMIT_WINDOW=60
TTL_HEARTBEAT=300

# Alternative Redis URL format
# REDIS_URL=redis://localhost:6379

# ==================== CORS Configuration ====================
CORS_ORIGIN=http://localhost:5173

# ==================== Rate Limiting ====================
RATE_LIMIT_UPLOADS_PER_MINUTE=100
RATE_LIMIT_DOWNLOADS_PER_MINUTE=100
RATE_LIMIT_WEBSOCKET_MESSAGES_PER_MINUTE=1000

# ==================== File Transfer Configuration ====================
MAX_FILE_SIZE=1073741824
CHUNK_SIZE=16384
MAX_CONCURRENT_UPLOADS=10
MAX_CONCURRENT_DOWNLOADS=10
MAX_CONCURRENT_TRANSFERS=5
ACK_TIMEOUT_MS=10000
MAX_RETRIES=3
ACK_CHECK_INTERVAL_MS=2000

# ==================== Session Configuration ====================
SESSION_TIMEOUT_MINUTES=60
SHARE_SESSION_TIMEOUT_HOURS=24
HEARTBEAT_INTERVAL_SECONDS=10
CLEANUP_INTERVAL=60000

# ==================== WebSocket Configuration ====================
WEBSOCKET_MAX_BUFFER_SIZE=104857600
WS_PING_INTERVAL=25000
WS_PING_TIMEOUT=5000

# ==================== Performance ====================
# Enable C++ Native Addon (net_io) for high-performance network operations (SIMD checksums, XOR cipher)
USE_NATIVE_ADDON=true
USE_REDIS=true
USE_CLUSTER=true
ENABLE_COMPRESSION=true

# ==================== Monitoring & Logging ====================
LOG_LEVEL=info
DEBUG_DB=false
ENABLE_METRICS=true

